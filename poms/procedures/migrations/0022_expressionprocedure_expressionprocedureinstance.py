# Generated by Django 2.2.5 on 2022-06-23 14:26

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ('schedules', '0014_schedule_json_data'),
        ('users', '0042_auto_20220314_1202'),
        ('procedures', '0021_auto_20220127_1536'),
    ]

    operations = [
        migrations.CreateModel(
            name='ExpressionProcedureInstance',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', models.DateTimeField(auto_now_add=True, db_index=True, null=True, verbose_name='created')),
                ('modified', models.DateTimeField(auto_now=True, db_index=True, verbose_name='modified')),
                ('status',
                 models.CharField(choices=[('I', 'Init'), ('P', 'Pending'), ('D', 'Done'), ('E', 'Error')], default='I',
                                  max_length=1, verbose_name='status')),
                ('started_by', models.CharField(choices=[('M', 'Member'), ('S', 'Schedule')], default='M', max_length=1,
                                                verbose_name='started by')),
                ('error_code', models.PositiveSmallIntegerField(blank=True, null=True, verbose_name='error code')),
                ('error_message', models.TextField(blank=True, null=True, verbose_name='error message')),
                ('action', models.CharField(blank=True, max_length=255, null=True)),
                ('provider', models.CharField(blank=True, max_length=255, null=True)),
                ('action_verbose', models.CharField(blank=True, max_length=255, null=True)),
                ('provider_verbose', models.CharField(blank=True, max_length=255, null=True)),
                ('calculated_options_data', models.TextField(blank=True, null=True, verbose_name='calculated options')),
                ('master_user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='users.MasterUser',
                                                  verbose_name='master user')),
                ('member', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL,
                                             to='users.Member', verbose_name='member')),
                ('procedure', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE,
                                                to='procedures.RequestDataFileProcedure', verbose_name='procedure')),
                ('schedule_instance',
                 models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL,
                                   to='schedules.ScheduleInstance', verbose_name='schedule instance')),
            ],
            options={
                'ordering': ['-created'],
            },
        ),
        migrations.CreateModel(
            name='ExpressionProcedure',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('user_code', models.CharField(blank=True, max_length=255, null=True, verbose_name='user code')),
                ('name', models.CharField(max_length=255, verbose_name='name')),
                ('short_name', models.TextField(blank=True, null=True, verbose_name='short name')),
                ('public_name',
                 models.CharField(blank=True, help_text='used if user does not have permissions to view object',
                                  max_length=255, null=True, verbose_name='public name')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='notes')),
                ('is_enabled', models.BooleanField(db_index=True, default=True, verbose_name='is enabled')),
                ('created', models.DateTimeField(auto_now_add=True, db_index=True, null=True, verbose_name='created')),
                ('modified', models.DateTimeField(auto_now=True, db_index=True, verbose_name='modified')),
                ('notes_for_users', models.TextField(blank=True, default='', verbose_name='notes for user')),
                ('date_from', models.DateField(blank=True, null=True, verbose_name='price date from')),
                ('date_from_expr', models.CharField(blank=True, default='', max_length=1024, null=True,
                                                    verbose_name='price date from expr')),
                ('date_to', models.DateField(blank=True, null=True, verbose_name='price date to')),
                ('date_to_expr', models.CharField(blank=True, default='', max_length=1024, null=True,
                                                  verbose_name='price date to expr')),
                ('code', models.TextField(blank=True, null=True, verbose_name='code')),
                ('options_data', models.TextField(blank=True, null=True, verbose_name='json data')),
                ('master_user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='users.MasterUser',
                                                  verbose_name='master user')),
            ],
            options={
                'ordering': ['user_code'],
                'abstract': False,
                'unique_together': {('master_user', 'user_code')},
            },
        ),
    ]
