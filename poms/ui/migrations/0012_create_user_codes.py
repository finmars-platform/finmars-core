# Generated by Django 4.1.3 on 2023-05-15 12:32

from django.db import migrations, models


def forwards_func(apps, schema_editor):
    # print("forwards_func")

    from poms.ui.models import ComplexTransactionUserField, TransactionUserField, InstrumentUserField

    items = ComplexTransactionUserField.objects.all()

    for item in items:

        if not item.user_code:

            item.configuration_code = 'com.finmars.local'

            item.user_code = item.configuration_code + ':' + item.key.replace(' ', '_').lower()

            item.save()

    items = TransactionUserField.objects.all()

    for item in items:

        if not item.user_code:

            item.configuration_code = 'com.finmars.local'

            item.user_code = item.configuration_code + ':' + item.key.replace(' ', '_').lower()

            item.save()

    items = InstrumentUserField.objects.all()

    for item in items:

        if not item.user_code:

            item.configuration_code = 'com.finmars.local'

            item.user_code = item.configuration_code + ':' + item.key.replace(' ', '_').lower()

            item.save()


def reverse_func(apps, schema_editor):
    pass


class Migration(migrations.Migration):

    dependencies = [
        ('ui', '0011_instrumentuserfield_created_and_more'),
    ]



    operations = [
        migrations.RunPython(forwards_func, reverse_func),
    ]
